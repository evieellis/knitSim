<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Lecture Feed</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
  :root {
    --bg: #f7fafc;
    --card: #ffffff;
    --muted: #6b7280;
    --accent: #111827;
  }

  body {
    margin: 0;
    padding: 2rem;
    font-family: 'Inter', system-ui, Arial, sans-serif;
    background: var(--bg);
    color: var(--accent);
    display: flex;
    justify-content: center;
  }

  .page {
    width: 100%;
    max-width: 960px;
  }

  h1 {
    text-align: center;
    margin-bottom: 2rem;
    font-weight: 600;
  }

  #videos {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .video-card {
    background: var(--card);
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(2, 6, 23, 0.06);
    overflow: hidden;
  }

  .player-wrap {
    width: 100%;
    background: black;
  }

  .player-wrap iframe {
    width: 100%;
    height: 520px;
    border: 0;
    display: block;
  }

  @media (max-width: 700px) {
    .player-wrap iframe {
      height: 260px;
    }
  }

  .meta {
    padding: 0.9rem 1rem 1.2rem;
  }

  .meta h2 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
  }

  .meta p {
    margin: 0.4rem 0 0 0;
    color: var(--muted);
    font-size: 0.9rem;
  }

  footer {
    text-align: center;
    color: var(--muted);
    margin-top: 3rem;
    font-size: 0.9rem;
  }
</style>
</head>
<body>
  <div class="page">
    <h1>Lecture Feed</h1>

    <div id="videos">Loading lectures…</div>

    <footer>© 2025 Your Organization Name</footer>
  </div>

<script>
const PLAYLIST_ID = 'PLPyL9WUlsosnF2LGko0TpR4epFFuc7Om2'; // e.g. 'PL8dPuuaLjXtNlUrzyH5r6jN9ulIgZBpdo'
const API_KEY = 'AIzaSyDgmRl9Thw11FsJ5tnEbf6ztdGDFEq3HT0'; // YouTube Data API v3 key

async function loadPlaylist() {
  const container = document.getElementById('videos');
  container.textContent = 'Loading lectures…';

  try {
    const resp = await fetch(
      `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,contentDetails&maxResults=50&playlistId=${PLAYLIST_ID}&key=${API_KEY}`
    );
    const data = await resp.json();

    if (!data.items || data.items.length === 0) {
      container.textContent = 'No videos found in this playlist.';
      return;
    }

    container.innerHTML = '';

    data.items.forEach(item => {
      const snippet = item.snippet || {};
      const videoId =
        (snippet.resourceId && snippet.resourceId.videoId) ||
        (item.contentDetails && item.contentDetails.videoId);
      if (!videoId) return;

      const title = snippet.title || 'Untitled';
      const channel = snippet.videoOwnerChannelTitle || snippet.channelTitle || 'Unknown Channel';
      const date = snippet.publishedAt
        ? new Date(snippet.publishedAt).toLocaleDateString(undefined, {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
          })
        : '';

      const card = document.createElement('article');
      card.className = 'video-card';
      card.innerHTML = `
        <div class="player-wrap">
          <iframe
            src="https://www.youtube.com/embed/${videoId}?rel=0&modestbranding=1"
            allow="autoplay; fullscreen"
            title="${escapeHtml(title)}"
            loading="lazy">
          </iframe>
        </div>

        <div class="meta">
          <h2>${escapeHtml(title)}</h2>
          <p>${escapeHtml(channel)} · ${escapeHtml(date)}</p>
        </div>
      `;
      container.appendChild(card);
    });
  } catch (err) {
    console.error(err);
    container.textContent =
      'Error loading playlist — check your API key and playlist ID.';
  }
}

function escapeHtml(str = '') {
  return String(str)
    .replaceAll('&', '&amp;')
    .replaceAll('<', '&lt;')
    .replaceAll('>', '&gt;')
    .replaceAll('"', '&quot;')
    .replaceAll("'", '&#39;');
}

loadPlaylist();
</script>
</body>
</html>